<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مجموعة السند الدولية للمحاماة والاستشارات القانونية</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Cairo for Arabic, Inter for numbers/latin if any-->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif; /* Prioritize Cairo for Arabic text */
            background-color: #f8f8f8; /* Light gray background */
        }
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header/Navigation Bar -->
    <header class="bg-white shadow-sm py-4 fixed w-full z-10">
        <nav class="container mx-auto flex justify-between items-center px-4 sm:px-6 lg:px-8">
            <div class="flex items-center">
                <!-- Simplified Scale Logo (SVG) -->
                <svg class="h-10 w-10 text-indigo-700 ml-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="2" x2="12" y2="20"></line>
                    <line x1="4" y1="16" x2="20" y2="16"></line>
                    <line x1="7" y1="20" x2="17" y2="20"></line>
                    <circle cx="6" cy="18" r="2"></circle>
                    <circle cx="18" cy="18" r="2"></circle>
                </svg>
                <div class="text-2xl font-bold text-indigo-800">
                    مجموعة السند الدولية
                </div>
            </div>
            <div class="hidden md:flex space-x-6">
                <a href="#home" class="text-gray-600 hover:text-indigo-800 font-medium">الرئيسية</a>
                <a href="#about" class="text-gray-600 hover:text-indigo-800 font-medium">عنّا</a>
                <a href="#services" class="text-gray-600 hover:text-indigo-800 font-medium">خدماتنا</a>
                <a href="#why-us" class="text-gray-600 hover:text-indigo-800 font-medium">لماذا نحن</a>
                <a href="#ai-assistant" class="text-gray-600 hover:text-indigo-800 font-medium">مساعد الذكاء الاصطناعي</a>
                <a href="#contact" class="text-gray-600 hover:text-indigo-800 font-medium">اتصل بنا</a>
            </div>
            <!-- Mobile Menu Button (Hamburger) -->
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </nav>
    </header>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-20 hidden">
        <div class="relative w-full max-w-xs bg-white h-full shadow-lg p-6">
            <button id="close-mobile-menu" class="absolute top-4 left-4 text-gray-700 focus:outline-none">
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <nav class="flex flex-col space-y-4 mt-12">
                <a href="#home" class="text-gray-800 hover:text-indigo-700 text-lg font-medium py-2 block" onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden')">الرئيسية</a>
                <a href="#about" class="text-gray-800 hover:text-indigo-700 text-lg font-medium py-2 block" onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden')">عنّا</a>
                <a href="#services" class="text-gray-800 hover:text-indigo-700 text-lg font-medium py-2 block" onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden')">خدماتنا</a>
                <a href="#why-us" class="text-gray-800 hover:text-indigo-700 text-lg font-medium py-2 block" onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden')">لماذا نحن</a>
                <a href="#ai-assistant" class="text-gray-800 hover:text-indigo-700 text-lg font-medium py-2 block" onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden')">مساعد الذكاء الاصطناعي</a>
                <a href="#contact" class="text-gray-800 hover:text-indigo-700 text-lg font-medium py-2 block" onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden')">اتصل بنا</a>
            </nav>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="relative bg-gradient-to-r from-blue-700 to-indigo-800 text-white py-24 sm:py-32 lg:py-48 mt-16 flex items-center justify-center min-h-screen-minus-header">
        <div class="container mx-auto text-center px-4 sm:px-6 lg:px-8">
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight mb-6">
                مجموعة السند الدولية <br class="hidden sm:inline-block"> لأعمال المحاماة والاستشارات القانونية
            </h1>
            <p class="text-lg sm:text-xl lg:text-2xl mb-10 max-w-3xl mx-auto opacity-90">
                نلتزم بتحقيق العدالة وتقديم الاستشارات القانونية الشاملة لعملائنا الكرام.
            </p>
            <a href="#contact" class="inline-block bg-white text-blue-700 hover:bg-gray-100 px-8 py-4 rounded-full text-lg font-semibold shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                احصل على استشارة مجانية
            </a>
        </div>
    </section>

    <!-- About Us Section -->
    <section id="about" class="py-16 sm:py-20 lg:py-24 bg-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col lg:flex-row items-center gap-12">
            <div class="lg:w-1/2">
                <img src="https://placehold.co/600x400/3B82F6/FFFFFF?text=Team+of+Lawyers" alt="صورة فريق محامين" class="rounded-xl shadow-lg w-full h-auto object-cover">
            </div>
            <div class="lg:w-1/2 text-center lg:text-right">
                <h2 class="text-3xl sm:text-4xl font-bold mb-6 text-indigo-800">عن مجموعة السند الدولية</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    تُعد مجموعة السند الدولية للمحاماة والاستشارات القانونية صرحًا قانونيًا رائدًا، حيث نقدم مجموعة واسعة من الخدمات القانونية المتخصصة للأفراد والشركات على حد سواء. نلتزم بأعلى معايير النزاهة والمهنية، ونعمل بشغف لتقديم حلول قانونية مبتكرة وفعالة تلبي احتياجات عملائنا وتحقق مصالحهم.
                </p>
                <p class="text-lg text-gray-700 leading-relaxed">
                    يضم فريقنا نخبة من المحامين والمستشارين القانونيين ذوي الخبرة الواسعة في مختلف فروع القانون، والذين يسعون دائمًا لتقديم أفضل تمثيل قانوني ونصائح استراتيجية مبنية على فهم عميق للنظام القانوني المحلي والدولي.
                </p>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-16 sm:py-20 lg:py-24 bg-gray-100">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl sm:text-4xl font-bold text-center mb-12 text-indigo-800">خدماتنا القانونية</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                <!-- Service Card 1: تحصيل الديون -->
                <div class="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 ease-in-out border border-gray-200 flex flex-col items-center text-center">
                    <div class="bg-blue-100 p-4 rounded-full mb-6">
                        <svg class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V6m0 4v4m0 4v2m-6 0h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">تحصيل الديون</h3>
                    <p class="text-gray-600 leading-relaxed">
                        نقدم خدمات متخصصة في تحصيل الديون المتأخرة، سواء للأفراد أو الشركات، بكفاءة وفعالية.
                    </p>
                </div>

                <!-- Service Card 2: تأسيس شركات -->
                <div class="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 ease-in-out border border-gray-200 flex flex-col items-center text-center">
                    <div class="bg-blue-100 p-4 rounded-full mb-6">
                        <svg class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-1.282-8.455-3.545L5.254 7.64M11.25 10.75L9 8.5l-2.25 2.25M17.25 10.75L15 8.5l-2.25 2.25M12 21V3"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">تأسيس شركات</h3>
                    <p class="text-gray-600 leading-relaxed">
                        نقدم الدعم القانوني الكامل لعملية تأسيس الشركات بكافة أنواعها، بما يتوافق مع القوانين المحلية والدولية.
                    </p>
                </div>

                <!-- Service Card 3: قضايا عمالية وموظفين -->
                <div class="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 ease-in-out border border-gray-200 flex flex-col items-center text-center">
                    <div class="bg-blue-100 p-4 rounded-full mb-6">
                        <svg class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h-4v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2H0V8a6 6 0 016-6h12a6 6 0 016 6v12h-4zm-7-2v2h4v-2h-4z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">قضايا عمالية وموظفين</h3>
                    <p class="text-gray-600 leading-relaxed">
                        نتعامل مع كافة القضايا المتعلقة بقانون العمل، بما في ذلك حقوق الموظفين، الفصل التعسفي، والنزاعات العمالية.
                    </p>
                </div>

                <!-- Service Card 4: تسجيل عقارات -->
                <div class="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 ease-in-out border border-gray-200 flex flex-col items-center text-center">
                    <div class="bg-blue-100 p-4 rounded-full mb-6">
                        <svg class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l7 7 7-7M21 10v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1h3"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">تسجيل عقارات</h3>
                    <p class="text-gray-600 leading-relaxed">
                        نقدم كافة الخدمات المتعلقة بتسجيل العقارات، عقود البيع والشراء، والنزاعات العقارية.
                    </p>
                </div>

                <!-- Service Card 5: القانون الجنائي -->
                <div class="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 ease-in-out border border-gray-200 flex flex-col items-center text-center">
                    <div class="bg-blue-100 p-4 rounded-full mb-6">
                        <svg class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">القانون الجنائي</h3>
                    <p class="text-gray-600 leading-relaxed">
                        الدفاع في القضايا الجنائية، الاستئنافات، قضايا المخدرات، جرائم الإنترنت.
                    </p>
                </div>

                <!-- Service Card 6: الاستشارات القانونية -->
                <div class="bg-white p-8 rounded-xl shadow-md hover:shadow-lg transition duration-300 ease-in-out border border-gray-200 flex flex-col items-center text-center">
                    <div class="bg-blue-100 p-4 rounded-full mb-6">
                        <svg class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9.228a4.5 4.5 0 000 6.364M12 20.25a8.25 8.25 0 01-11.218-10.751 8.25 8.25 0 0110.75 11.218zM15.75 6.75a4.5 4.5 0 00-6.364 0"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-4 text-blue-700">الاستشارات القانونية</h3>
                    <p class="text-gray-600 leading-relaxed">
                        تقديم النصح والإرشاد القانوني في كافة المجالات، صياغة ومراجعة العقود.
                    </p>
                </div>

            </div>
        </div>
    </section>

    <!-- AI Legal Assistant Section -->
    <section id="ai-assistant" class="py-16 sm:py-20 lg:py-24 bg-blue-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl sm:text-4xl font-bold mb-8 text-indigo-800">✨ مساعد الاستفسارات القانونية المدعوم بالذكاء الاصطناعي ✨</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-2xl mx-auto">
                صف مشكلتك القانونية أو سؤالك بإيجاز هنا، وسنقوم بمساعدتك على صياغته بشكل أوضح لتحديد الخدمة المناسبة.
            </p>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-lg mx-auto">
                <textarea id="legal-query-input" rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-right resize-none" placeholder="اكتب مشكلتك القانونية هنا... (مثال: لدي نزاع عقاري مع المستأجر بخصوص عقد الإيجار)"></textarea>
                <button id="clarify-query-button" class="mt-6 w-full bg-blue-700 text-white py-3 rounded-lg font-semibold hover:bg-blue-800 transition duration-300 ease-in-out shadow-md flex items-center justify-center">
                    <svg class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 17V5m6.413 12L18 14.5M6 17L6 14.5M10.75 10.75L12 8.5l1.25 2.25M17.25 10.75L19 12.5l1.75-1.75M4.75 10.75L6 12.5l1.75-1.75M12 22a10 10 0 100-20 10 10 0 000 20z"></path></svg>
                    ✨ صياغة الاستفسار بالذكاء الاصطناعي ✨
                </button>
                <div id="loading-indicator" class="mt-4 text-center text-blue-600 hidden">
                    جاري الصياغة... يرجى الانتظار
                </div>
                <div id="ai-response-container" class="mt-6 p-4 bg-blue-100 rounded-lg border border-blue-200 text-right text-gray-800 hidden">
                    <p class="font-semibold mb-2">صياغة الذكاء الاصطناعي لاقتراحك:</p>
                    <p id="ai-response-text" class="leading-relaxed"></p>
                </div>
                <div id="error-message" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded hidden text-right">
                    حدث خطأ: لا يمكن معالجة طلبك حاليًا. يرجى المحاولة مرة أخرى أو الاتصال بنا مباشرة.
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action Section -->
    <section class="py-16 sm:py-20 lg:py-24 bg-gradient-to-r from-blue-700 to-indigo-800 text-white text-center">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-6">هل أنت مستعد للحصول على الدعم القانوني؟</h2>
            <p class="text-lg sm:text-xl mb-10 max-w-2xl mx-auto opacity-90">
                دعنا نساعدك في حماية حقوقك وتحقيق أهدافك القانونية.
            </p>
            <a href="#contact" class="inline-block bg-white text-blue-700 hover:bg-gray-100 px-8 py-4 rounded-full text-lg font-semibold shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                تواصل معنا الآن
            </a>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 sm:py-20 lg:py-24 bg-gray-100">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl sm:text-4xl font-bold mb-8 text-indigo-800">اتصل بنا</h2>
            <p class="text-lg text-gray-700 mb-8 max-w-xl mx-auto">
                للحصول على استشارة قانونية أو أي استفسارات، يرجى ملء النموذج أدناه أو الاتصال بنا مباشرة.
            </p>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-lg mx-auto">
                <form class="space-y-6">
                    <div>
                        <label for="name" class="block text-right text-gray-700 text-sm font-medium mb-2">اسمك</label>
                        <input type="text" id="name" name="name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-right" placeholder="اسمك الكامل">
                    </div>
                    <div>
                        <label for="email" class="block text-right text-gray-700 text-sm font-medium mb-2">بريدك الإلكتروني</label>
                        <input type="email" id="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-right" placeholder="بريدك الإلكتروني">
                    </div>
                    <div>
                        <label for="message" class="block text-right text-gray-700 text-sm font-medium mb-2">رسالتك</label>
                        <textarea id="message" name="message" rows="5" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-right" placeholder="اكتب رسالتك هنا..."></textarea>
                    </div>
                    <button type="submit" class="w-full bg-blue-700 text-white py-3 rounded-lg font-semibold hover:bg-blue-800 transition duration-300 ease-in-out shadow-md">
                        إرسال الرسالة
                    </button>
                </form>
                <div class="mt-8 text-gray-600 text-right">
                    <p class="mb-2"><strong>الهاتف:</strong> <a href="tel:+201063234291" class="text-blue-600 hover:underline">01063234291</a>, <a href="tel:+201101639052" class="text-blue-600 hover:underline">01101639052</a></p>
                    <p><strong>البريد الإلكتروني:</strong> <a href="mailto:info@alsanadlaw.com" class="text-blue-600 hover:underline">info@alsanadlaw.com</a></p>
                    <p class="mt-2"><strong>العناوين:</strong> الغردقة | الأقصر | قنا</p>
                    <p class="mt-2">
                        <a href="https://www.facebook.com/elsanad2003?locale=ar_AR" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline flex items-center justify-end">
                            صفحة الفيسبوك <svg class="h-5 w-5 ml-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33V22H12c5.523 0 10-4.477 10-10z" clip-rule="evenodd" /></svg>
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 text-center">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <p>&copy; 2024 مجموعة السند الدولية للمحاماة والاستشارات القانونية. جميع الحقوق محفوظة.</p>
            <div class="flex justify-center space-x-6 mt-4">
                <a href="#" class="text-gray-400 hover:text-white transition duration-300">سياسة الخصوصية</a>
                <a href="#" class="text-gray-400 hover:text-white transition duration-300">شروط الخدمة</a>
            </div>
        </div>
    </footer>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Mobile menu toggle functionality
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const closeMobileMenu = document.getElementById('close-mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenuOverlay.classList.remove('hidden');
        });

        closeMobileMenu.addEventListener('click', () => {
            mobileMenuOverlay.classList.add('hidden');
        });

        // Close mobile menu when clicking outside of it
        mobileMenuOverlay.addEventListener('click', (event) => {
            if (event.target === mobileMenuOverlay) {
                mobileMenuOverlay.classList.add('hidden');
            }
        });

        // Close mobile menu when a nav link is clicked (inside overlay)
        const mobileNavLinks = mobileMenuOverlay.querySelectorAll('a');
        mobileNavLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenuOverlay.classList.add('hidden');
            });
        });

        // Gemini API Integration - Legal Query Clarifier
        document.getElementById('clarify-query-button').addEventListener('click', async () => {
            const queryInput = document.getElementById('legal-query-input');
            const aiResponseContainer = document.getElementById('ai-response-container');
            const aiResponseText = document.getElementById('ai-response-text');
            const loadingIndicator = document.getElementById('loading-indicator');
            const errorMessage = document.getElementById('error-message');

            const userQuery = queryInput.value.trim();

            // Clear previous responses and hide error
            aiResponseText.textContent = '';
            aiResponseContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');

            if (!userQuery) {
                errorMessage.textContent = 'الرجاء إدخال استفسارك القانوني.';
                errorMessage.classList.remove('hidden');
                return;
            }

            loadingIndicator.classList.remove('hidden');
            document.getElementById('clarify-query-button').disabled = true; // Disable button during processing

            try {
                let chatHistory = [];
                const prompt = `أنا بحاجة إلى مساعدة قانونية. يرجى قراءة هذا الوصف لمشكلتي القانونية وإعادة صياغتها لتكون أكثر وضوحًا وإيجازًا، واقتراح 2-3 فئات قانونية محتملة يمكن أن تندرج تحتها هذه المشكلة. اكتب الرد باللغة العربية فقط. \n\nمشكلتي: ${userQuery}`;
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will automatically provide API key here
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiResponseText.textContent = text;
                    aiResponseContainer.classList.remove('hidden');
                } else {
                    